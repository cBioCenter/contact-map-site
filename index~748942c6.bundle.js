!function(e){function t(t){for(var r,a,s=t[0],c=t[1],l=t[2],d=0,p=[];d<s.length;d++)a=s[d],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&p.push(o[a][0]),o[a]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(u&&u(t);p.length;)p.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var e,t=0;t<i.length;t++){for(var n=i[t],r=!0,s=1;s<n.length;s++){var c=n[s];0!==o[c]&&(r=!1)}r&&(i.splice(t--,1),e=a(a.s=n[0]))}return e}var r={},o={0:0},i=[];function a(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.m=e,a.c=r,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)a.d(n,r,function(t){return e[t]}.bind(null,r));return n},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="";var s=window.webpackJsonp=window.webpackJsonp||[],c=s.push.bind(s);s.push=t,s=s.slice();for(var l=0;l<s.length;l++)t(s[l]);var u=c;i.push(["./index.tsx",1,2]),n()}({"./index.tsx":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/react/index.js"),o=n("./node_modules/react-dom/index.js"),i=n("./node_modules/react-redux/es/index.js"),a=n("./src/index.ts"),s=a.configureStore();o.render(r.createElement(i.Provider,{store:s},r.createElement(a.ContactMapSitePage,null)),document.getElementById("contact-map-root"))},"./src/component/ErrorMessageComponent.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var a=n("./node_modules/bioblocks-viz/lib/index.js"),s=n("./node_modules/react/index.js"),c=n("./node_modules/semantic-ui-react/dist/es/index.js"),l=function(e){function t(t){var n=e.call(this,t)||this;return n.renderSequenceAccordionMessage=function(e,t,n,r){var o,a,c=0,l=n[0].resno,u=new Array;try{for(var d=i(n),p=d.next();!p.done;p=d.next()){var f=p.value,h="pdb"===r?f.pdbAminoAcid:f.couplingAminoAcid,m=t.indexOf(h.singleLetterCode,c+(f.resno-l));m>=0&&(u.push(s.createElement(s.Fragment,{key:"mismatch-"+f.resno},s.createElement("span",{style:{color:"black",fontSize:"12px"}},t.substring(c,m)),s.createElement("span",{style:{color:"red",fontSize:"16px",textDecoration:"underline"}},t.charAt(m)))),l=f.resno+1,c=m+1)}}catch(e){o={error:e}}finally{try{p&&!p.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}return u.push(s.createElement("span",{key:"mismatch-final",style:{color:"black",fontSize:"12px"}},t.substring(c))),{content:{content:s.createElement("p",{style:{width:"80%",wordBreak:"break-word"}},u)},key:"panel-"+e,title:{content:e+" ("+t.length+" Amino Acids)"}}},n}return o(t,e),t.prototype.render=function(){var e=this.props,t=e.couplingScores,n=e.errorMsg,r=e.mismatches,o=e.pdbData;return r.length>=1||n.length>=1?s.createElement(c.Message,{warning:!0},r.length>=1&&o?s.createElement("div",null,s.createElement(c.Message.Header,null,"Residue numbering mismatch detected. Please upload a file to correct the position numbering differences.",s.createElement("br",null),"EVCouplings and EVFold outputs this file in the ",s.createElement("strong",null,"OUTPUT")," directory.\n                This file might be named similar to\n                '"+o.name+".csv' or '"+o.name+".indextableplus'"),s.createElement(c.Message.List,null,n),s.createElement(c.Message.Content,null,s.createElement(c.Accordion,{fluid:!0,exclusive:!1,defaultActiveIndex:[],panels:[this.renderSequenceAccordionMessage("PDB sequence",o.sequence,r,"pdb"),this.renderSequenceAccordionMessage("Couplings Score sequence",t.sequence,r,"coupling")]}))):n):null},t.defaultProps={couplingScores:new a.CouplingContainer,errorMsg:"",mismatches:[]},t}(s.Component);t.ErrorMessageComponent=l},"./src/component/FolderUploadComponent.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),i=this&&this.__assign||function(){return(i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0});var s=n("./node_modules/react/index.js"),c=n("./node_modules/react-dropzone/dist/es/index.js"),l=n("./node_modules/semantic-ui-react/dist/es/index.js"),u=function(e){function t(t){return e.call(this,t)||this}return o(t,e),t.prototype.render=function(){var e=this.props,n=e.onDrop,r=e.style,o=i(i({},t.defaultProps.style),r);return s.createElement(c.default,{onDrop:n},(function(e){var t=e.getRootProps,n=e.getInputProps,r=t(),c=r.ref,u=a(r,["ref"]);return s.createElement("div",i({ref:c,style:o},u),s.createElement("input",i({},n())),s.createElement(l.Label,{size:"massive"},s.createElement(l.Icon,{name:"upload",size:"large"}),"Drop 'em here!"))}))},t.defaultProps={style:{backgroundColor:"lightblue",border:"7px dashed blue",height:"90vmin",textAlign:"center"}},t}(s.Component);t.FolderUploadComponent=u},"./src/component/index.ts":function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n("./src/component/ErrorMessageComponent.tsx")),r(n("./src/component/FolderUploadComponent.tsx"))},"./src/container/SiteHeader.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/react/index.js"),a=n("./node_modules/react-redux/es/index.js"),s=n("./node_modules/react-router-dom/es/index.js"),c=n("./node_modules/semantic-ui-react/dist/es/index.js"),l=function(e){function t(t){var n=e.call(this,t)||this;return n.renderNavMenu=function(){var e=n.state.currentPageName;return i.createElement(c.Menu,{defaultActiveIndex:-1,secondary:!0},i.createElement(c.Menu.Item,{key:"home"},i.createElement(s.Link,{to:"/",style:{color:"black",fontSize:"18px",fontWeight:"/"===e?"bold":"normal"}},"Home")),i.createElement(c.Menu.Item,{key:"manuscript"},i.createElement(s.Link,{to:"/manuscript",style:{color:"black",fontSize:"18px",fontWeight:"/manuscript"===e?"bold":"normal"}},"Manuscripts")))},n.state={currentPageName:null},n}return o(t,e),t.prototype.componentDidMount=function(){this.setState({currentPageName:this.props.pathname})},t.prototype.componentDidUpdate=function(){this.props.pathname&&this.props.pathname!==this.state.currentPageName&&this.setState({currentPageName:this.props.pathname})},t.prototype.render=function(){return i.createElement(c.Header,null,i.createElement(c.Menu,{secondary:!0,borderless:!0,fluid:!0,style:{maxHeight:"40px",padding:"20px 0 0 0"}},i.createElement(c.Menu.Item,{fitted:"vertically",position:"left"},i.createElement(s.Link,{to:"/"},i.createElement("img",{alt:"hca-dynamics-icon",src:"assets/icons/bio-blocks-icon-2x.png",style:{height:"32px",width:"32px"}}),i.createElement("span",{style:{color:"black",fontSize:"32px",fontWeight:"bold"}},"ContactMap.org: 2D and 3D Protein Visualization")))),this.renderNavMenu())},t}(i.Component);t.UnconnectedSiteHeader=l;t.SiteHeader=a.connect((function(e){return{pathname:e.router.location.pathname}}))(l)},"./src/container/index.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n("./src/container/SiteHeader.tsx"))},"./src/index.ts":function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n("./src/component/index.ts")),r(n("./src/container/index.ts")),r(n("./src/page/index.ts")),r(n("./src/reducer/index.ts"))},"./src/page/ContactMapSitePage.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/connected-react-router/esm/index.js"),a=n("./node_modules/react/index.js"),s=n("./node_modules/react-router-dom/es/index.js"),c=n("./node_modules/semantic-ui-react/dist/es/index.js"),l=n("./src/container/index.ts"),u=n("./src/page/index.ts"),d=n("./src/reducer/index.ts"),p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renderVisualizationPage=function(){return a.createElement(u.VisualizationPage,null)},t.renderManuscriptPage=function(){return a.createElement(u.ManuscriptPage,null)},t}return o(t,e),t.prototype.render=function(){return a.createElement(i.ConnectedRouter,{history:d.history},a.createElement(c.Container,{id:"ContactMapSitePage",fluid:!0},a.createElement(l.SiteHeader,null),a.createElement(s.Switch,null,a.createElement(s.Route,{path:"/manuscript",render:this.renderManuscriptPage}),a.createElement(s.Route,{exact:!0,path:"/",render:this.renderVisualizationPage}))))},t}(a.Component);t.ContactMapSitePage=p},"./src/page/ManuscriptPage.tsx":function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n("./node_modules/react/index.js"),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.prototype.render=function(){return i.createElement("div",null,"Here there be manuscripts")},t}(i.Component);t.ManuscriptPage=a},"./src/page/VisualizationPage.tsx":function(e,t,n){"use strict";var r,o,i=this&&this.__extends||(r=function(e,t){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),a=this&&this.__assign||function(){return(a=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},s=this&&this.__awaiter||function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))},c=this&&this.__generator||function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}},l=this&&this.__values||function(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(t,"__esModule",{value:!0});var u=n("./node_modules/bioblocks-viz/lib/index.js"),d=n("./node_modules/react/index.js"),p=n("./node_modules/redux/es/redux.js"),f=n("./node_modules/semantic-ui-react/dist/es/index.js"),h=n("./src/component/index.ts"),m=function(e){function t(n){var r=e.call(this,n)||this;return r.onDragOver=function(e){e.stopPropagation(),window.removeEventListener("dragover",r.onDragOver),r.setState({isDragHappening:!0})},r.onCloseUpload=function(){window.addEventListener("dragover",r.onDragOver),r.setState({isDragHappening:!1})},r.renderCouplingComponents=function(e,t){var n=(void 0===e?r.props:e).style,o=(void 0===t?r.state:t).measuredProximity;return d.createElement(f.Segment,{attached:!0,raised:!0},d.createElement(f.Grid,{centered:!0,padded:!0,relaxed:!0},r.renderButtonsRow(),d.createElement(f.Grid.Row,null,d.createElement("br",null)),d.createElement(f.GridRow,{columns:2,verticalAlign:"bottom"},d.createElement(f.GridColumn,{width:7},r.renderContactMapCard(n)),d.createElement(f.GridColumn,{width:7},r.renderNGLCard(o)))))},r.renderFooter=function(){return d.createElement("footer",{style:{padding:"25vh 0 25px 25px"}},d.createElement(d.Fragment,null,"Powered by ",d.createElement("a",{href:"https://github.com/cBioCenter/bioblocks-viz"},"Bioblocks"),"!"))},r.renderStartMessage=function(){return d.createElement(f.Message,null,"To get started, please drag and drop onto the page either:",d.createElement("br",null),"(1) An evcouplings results directory.",d.createElement("br",null),"(2) Individual .pdb, coupling scores",d.createElement(f.Popup,{trigger:d.createElement("a",null,"(?)"),content:"A file that ends as 'CouplingScores.csv'"}),", and residue mapping files",d.createElement(f.Popup,{trigger:d.createElement("a",null,"(?)"),content:"A .csv file that starts with 'residue_mapping' - or - A file that ends in .indextable / .indextableplus"}),".",d.createElement("br",null),d.createElement("br",null)," Check out the",d.createElement("a",{href:"http://evfold.org"}," EVFold")," or",d.createElement("a",{href:"https://evcouplings.org/"}," EVCouplings ")," website to get these files.")},r.renderContactMapCard=function(e){var t=r.state,n=t.isLoading,o=t["Contact Map"];return d.createElement(u.ContactMapContainer,{data:{couplingScores:o.couplingScores,pdbData:{experimental:o.pdbData?o.pdbData.experimental:void 0},secondaryStructures:o.secondaryStructures},isDataLoading:n,style:e})},r.renderNGLCard=function(e){return d.createElement(u.NGLContainer,{experimentalProteins:r.state.experimentalProteins,isDataLoading:r.state.isLoading,measuredProximity:e,onMeasuredProximityChange:r.onMeasuredProximityChange(),predictedProteins:r.state.predictedProteins})},r.renderButtonsRow=function(){return d.createElement(f.GridRow,{textAlign:"right",verticalAlign:"bottom"},d.createElement(f.GridColumn,{style:{height:"100%",width:"auto"}},r.renderClearAllButton()))},r.renderClearAllButton=function(){return d.createElement(f.Button,{icon:"trash",label:{content:"Clean View"},labelPosition:"right",onClick:r.onClearAll(),style:{height:"100%"}})},r.onClearAll=function(){return function(){return s(r,void 0,void 0,(function(){var e,n,r;return c(this,(function(o){return e=this.props,n=e.clearAllResidues,r=e.clearAllSecondaryStructures,this.setState(t.initialState),n(),r(),this.forceUpdate(),[2]}))}))}},r.onFolderUpload=function(e,t,n){return s(r,void 0,void 0,(function(){var t,r,o,i,a,s,d,p,f,h,m,g,y,_,v,b,x,P,C,S;return c(this,(function(c){switch(c.label){case 0:this.onCloseUpload(),this.setState({experimentalProteins:[],isDragHappening:!1,isLoading:!0,predictedProteins:[]}),t="",r=this.state[u.VIZ_TYPE.CONTACT_MAP].couplingScores,o="",i=this.state.mismatches,s=[],d=[],p=r.totalContacts>=1&&r.isDerivedFromCouplingScores,f=new Array,h=new Array,m={},c.label=1;case 1:c.trys.push([1,8,9,10]),g=l(e),y=g.next(),c.label=2;case 2:return y.done?[3,7]:(_=y.value).name.endsWith(".pdb")?[4,u.BioblocksPDB.createPDB(_)]:[3,4];case 3:return a=c.sent(),_.path&&_.path.includes("/fold/")?h.push(a):_.path&&_.path.includes("/compare/")&&_.path.includes("/aux/")&&f.push(a),0===t.length&&_.path&&(b=_.path.split("/"),t=b.length>=2?b[1]:b[0]),[3,6];case 4:return[4,u.readFileAsText(_)];case 5:v=c.sent(),_.name.endsWith("indextable")||_.name.endsWith("indextableplus")||_.name.startsWith("residue_mapping")?s=u.generateResidueMapping(v):_.name.endsWith(".csv")&&_.name.includes("CouplingScores")?(m[_.name]=v,p=!0):_.name.endsWith("distance_map_multimer.csv")&&(d=this.getSecondaryStructuresFromFile(v)),0===t.length&&_.path&&(b=_.path.split("/"),t=b.length>=2?b[1]:b[0]),c.label=6;case 6:return y=g.next(),[3,2];case 7:return[3,10];case 8:return x=c.sent(),P={error:x},[3,10];case 9:try{y&&!y.done&&(C=g.return)&&C.call(g)}finally{if(P)throw P.error}return[7];case 10:return a&&0===f.length&&0===h.length?f.push(a):a=0===f.length?h[0]:f[0],o=this.getCouplingsScoreFile(m),r=o.length>=1?u.getCouplingScoresData(o,s):r,a&&(0===r.rankedContacts.length||void 0===r.rankedContacts[0].dist?r=a.amendPDBWithCouplingScores(r.rankedContacts,u.CONTACT_DISTANCE_PROXIMITY.CLOSEST):(i=a.getResidueNumberingMismatches(r),console.log(i))),r.isDerivedFromCouplingScores=p,n.target&&(n.target.value=""),this.setState(((S={})[u.VIZ_TYPE.CONTACT_MAP]={couplingScores:r,pdbData:{experimental:f[0],predicted:h[0]},secondaryStructures:d.length>=1?[d]:a?a.secondaryStructureSections:[]},S.errorMsg="Showing data from '"+t+"'",S.experimentalProteins=f,S.isLoading=!1,S.mismatches=i,S.predictedProteins=h,S)),[2]}}))}))},r.getCouplingsScoreFile=function(e){var t,n,r,o,i=Object.keys(e);try{for(var a=l(["CouplingScoresCompared_all","CouplingScores","CouplingScoresCompared_longrange","CouplingScores_longrange","CouplingScores_with_clashes"]),s=a.next();!s.done;s=a.next()){var c=s.value;try{for(var u=(r=void 0,l(i)),d=u.next();!d.done;d=u.next()){var p=d.value;if(p.endsWith(c+".csv"))return e[p]}}catch(e){r={error:e}}finally{try{d&&!d.done&&(o=u.return)&&o.call(u)}finally{if(r)throw r.error}}}}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(t)throw t.error}}return i.length>=1?e[i[0]]:""},r.getSecondaryStructuresFromFile=function(e){var t=new Array;return e.split("\n").slice(1).filter((function(e){return e.split(",").length>=3})).forEach((function(e){var n=e.split(","),r=parseFloat(n[1]),o=n[2];t[t.length-1]&&t[t.length-1].label===o?t[t.length-1].updateEnd(r):t.push(new u.Bioblocks1DSection(o,r))})),t},r.onMeasuredProximityChange=function(){return function(e){r.setState({measuredProximity:Object.values(u.CONTACT_DISTANCE_PROXIMITY)[e]})}},r.state=t.initialState,r}return i(t,e),t.prototype.componentDidMount=function(){window.addEventListener("dragover",this.onDragOver)},t.prototype.componentDidUpdate=function(e,t){var n=this.state.predictedProteins,r=this.state[u.VIZ_TYPE.CONTACT_MAP].couplingScores,o=n.length>=1?n[0]:void 0,i="",a=this.state.mismatches;!o||0!==t.predictedProteins.length&&t.predictedProteins[0]===o||r===t[u.VIZ_TYPE.CONTACT_MAP].couplingScores&&o===t[u.VIZ_TYPE.CONTACT_MAP].pdbData||(a=u.getPDBAndCouplingMismatch(o,r)).length>=1&&(i="Error details: "+a.length+" mismatch(es) detected between coupling scores and PDB!        For example, residue number "+a[0].resno+" is '"+a[0].pdbAminoAcid.threeLetterCode+"' in the PDB but '"+a[0].couplingAminoAcid.threeLetterCode+"' in the coupling scores file."),i.length>=1&&this.setState({errorMsg:i,mismatches:a})},t.prototype.render=function(e,t){var n=(void 0===e?this.props:e).style,r=void 0===t?this.state:t,o=r.errorMsg,i=r.experimentalProteins,s=r.isDragHappening,c=r.mismatches,l=r.predictedProteins;return d.createElement("div",{id:"BioblocksVizApp",style:a(a({},n),{height:"1000px"})},d.createElement(f.Modal,{closeOnDimmerClick:!0,closeOnEscape:!0,closeOnPortalMouseLeave:!0,onClose:this.onCloseUpload,open:s,size:"fullscreen"},d.createElement(h.FolderUploadComponent,{onDrop:this.onFolderUpload})),d.createElement(h.ErrorMessageComponent,{couplingScores:this.state[u.VIZ_TYPE.CONTACT_MAP].couplingScores,errorMsg:o,mismatches:c}),0===i.length&&0===l.length&&this.renderStartMessage(),this.renderCouplingComponents(),this.renderFooter())},t.defaultProps={clearAllResidues:u.EMPTY_FUNCTION,clearAllSecondaryStructures:u.EMPTY_FUNCTION,style:{backgroundColor:"#ffffff"}},t.initialState=((o={})[u.VIZ_TYPE.CONTACT_MAP]={couplingScores:new u.CouplingContainer,pdbData:void 0,secondaryStructures:[]},o.errorMsg="",o.experimentalProteins=[],o.isDragHappening=!1,o.isLoading=!1,o.measuredProximity=u.CONTACT_DISTANCE_PROXIMITY.CLOSEST,o.mismatches=[],o.predictedProteins=[],o.residueMapping=[],o),t}(d.Component);t.VisualizationPageClass=m;t.VisualizationPage=u.connectWithBBStore(u.EMPTY_FUNCTION,(function(e){return p.bindActionCreators({clearAllResidues:function(){return a(a(a({},u.createResiduePairActions().candidates.clear()),u.createResiduePairActions().hovered.clear()),u.createResiduePairActions().locked.clear())},clearAllSecondaryStructures:function(){return a(a({},u.createContainerActions("secondaryStructure/hovered").clear()),u.createContainerActions("secondaryStructure/selected").clear())}},e)}),m)},"./src/page/index.ts":function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n("./src/page/ContactMapSitePage.tsx")),r(n("./src/page/ManuscriptPage.tsx")),r(n("./src/page/VisualizationPage.tsx"))},"./src/reducer/ContactMapSiteReducer.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/connected-react-router/esm/index.js"),o=n("./node_modules/redux/es/redux.js");t.ContactMapSiteReducer=function(e){return o.combineReducers({router:r.connectRouter(e)})}},"./src/reducer/Store.ts":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("./node_modules/bioblocks-viz/lib/index.js"),o=n("./node_modules/connected-react-router/esm/index.js"),i=n("./node_modules/history/esm/history.js"),a=(n("./node_modules/redux-logger/dist/redux-logger.js"),n("./node_modules/redux-thunk/es/index.js"));t.history=i.createHashHistory(),[a.default,o.routerMiddleware(t.history)].push(r.BioblocksMiddleware),r.ReducerRegistry.register("router",o.connectRouter(t.history)),t.configureStore=function(){return r.BBStore}},"./src/reducer/index.ts":function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}Object.defineProperty(t,"__esModule",{value:!0}),r(n("./src/reducer/ContactMapSiteReducer.ts")),r(n("./src/reducer/Store.ts"))}});